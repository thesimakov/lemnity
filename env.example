# ============================================
# Main project
# ============================================
# Docker Configuration
COMPOSE_PROJECT_NAME=app

# Database Configuration
POSTGRES_USER=user
POSTGRES_PASSWORD=password
POSTGRES_DB=db
DATABASE_URL=postgresql://user:password@postgres:5432/db

# Server Configuration
NODE_ENV=production
JWT_SECRET=your-super-secret-jwt-key-change-in-production
PORT=3000

# Client Configuration
VITE_API_URL=http://localhost/api

# Mail Configuration
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USER=user@example.com
MAIL_PASSWORD=topsecret
MAIL_FROM=noreply@example.com
FRONTEND_URL=http://localhost:5173
# ============================================

# ============================================
# Collector Microservice
# ============================================
COLLECT_ENDPOINT=/collect
COLLECTOR_PORT=4000

# RabbitMQ
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_QUEUE=default_queue
RABBITMQ_ROUTING_KEY=default
RABBITMQ_MANAGEMENT_PORT=15672

# Collector RabbitMQ fallback behavior
# - clickhouse: писать событие прямо в ClickHouse при недоступности RabbitMQ
# - buffer: буферизовать в памяти и отправить в RabbitMQ после восстановления
COLLECTOR_RABBITMQ_FALLBACK=clickhouse

# ClickHouse
CLICKHOUSE_URL=http://clickhouse:8123
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DB=analytics
CLICKHOUSE_EVENTS_TABLE=widget_events
COLLECTOR_API_TOKEN=change-me
COLLECTOR_API_URL=http://collector:4000
COLLECTOR_INTERNAL_EVENTS_URL=http://collector:4000/internal/events/collect
# ============================================
