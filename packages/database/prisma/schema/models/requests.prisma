enum RequestStatus {
  new
  processed
  not_processed
  used
}

enum RequestDevice {
  desktop
  mobile_ios
  mobile_android
}

model Request {
  id        String        @id @default(cuid())
  seq       Int           @unique @default(autoincrement())

  projectId String        @map("project_id")
  project   Project       @relation(fields: [projectId], references: [id], onDelete: Cascade)

  widgetId  String        @map("widget_id")
  widget    Widget        @relation(fields: [widgetId], references: [id], onDelete: Cascade)

  fullName  String?       @map("full_name")
  phone     String?
  email     String?
  prizes    String[]      @default([])
  status    RequestStatus @default(new)
  device    RequestDevice @default(desktop)

  url       String?
  referrer  String?
  userAgent String?       @map("user_agent")
  ip        String?

  createdAt DateTime      @default(now()) @map("created_at")
  updatedAt DateTime      @updatedAt      @map("updated_at")

  @@map("requests")
  @@index([projectId])
  @@index([widgetId])
  @@index([status])
  @@index([createdAt])
}

